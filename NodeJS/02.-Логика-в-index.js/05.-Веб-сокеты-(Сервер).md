1. Сокет может поднять только авторизованный пользователь
2. При поднятии сокет сам тоже проверяет логин и пароль
3. если логин и пароль совпали создает все лиснеры, апдейтит таблицу `express_sessions` и поднимает сокет
4. срабатывает общее событие `connection`, а там в теле определяется лиснер 'disconnect' для поднятого сокета

## Лиснеры (так же смотрите клиентскую часть [здесь](https://gitlab.com/cloudmaker/tophr/tophr-www/-/wikis/Front/%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D0%BE%D1%80%D0%B0/02.-%D0%92%D0%B5%D0%B1-%D1%81%D0%BE%D0%BA%D0%B5%D1%82%D1%8B-(%D0%9A%D0%BB%D0%B8%D0%B5%D0%BD%D1%82)#%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA-%D1%81%D0%BE%D0%B1%D1%8B%D1%82%D0%B8%D0%B9-%D0%B8-%D0%B8%D1%85-%D0%BF%D1%80%D0%B5%D0%B4%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%82%D0%B0%D0%BA-%D0%B6%D0%B5-%D1%81%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BD%D1%83%D1%8E-%D1%87%D0%B0%D1%81%D1%82%D1%8C-%D0%B7%D0%B4%D0%B5%D1%81%D1%8C))
1. **'join room'** - отправитель вступает в комнату (подписка), которую задал в параметре, если сервер хочет отправить сообщение только в определенную комнату, тогда сообщение получат только те сокеты, которые состоят в той комнате
2. **'leave room'** - отправитель покидает в комнату, которую задали в параметре, сообщения отправленные в комнату больше не будут к нему приходить
3. **'request'** - выступает как контроллер для запросов, отправляет ответ к инициатору, только к нему, через событие **'request '+uuid** (гарантируется через **uuid**), соответственно чтобы принять ответ отправитель временно слушает событие **'request '+uuid**
5. **'invalidate'** - слушает и получает данные для инвалидации датасоурсов, данные отправленные инициатором транслирует всем сокетам в комнате (кроме самого отправителя) через событие **'ds invalidate'** 
6. **'sendMessage'** - чат, отправляет обычные сообщение в комнату, это сообщение транслирует всем участникам комнаты через событие **'incomingMessage'*
7. **'disconnect'** - срабатывает сразу после того как сокет оборвался, зачищает сессию  юзера с ноды ( оборвался сокет = убить сессию)